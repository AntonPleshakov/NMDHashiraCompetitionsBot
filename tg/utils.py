from textwrap import dedent
from typing import Union, Tuple, List

from telebot.types import InlineKeyboardButton, KeyboardButton, Message, CallbackQuery

from db.admins import admins_db
from db.tournament_structures import Match
from tournament.tournament_settings import TournamentSettings


def get_permissions_denied_message(user_id: int):
    admins_list = [
        f"[{admin.username}](tg://user?id={admin.user_id})"
        for admin in admins_db.get_admins()
    ]
    return (
        "Ğ’Ñ‹ Ğ½Ğµ ÑĞ²Ğ»ÑĞµÑ‚ĞµÑÑŒ Ğ°Ğ´Ğ¼Ğ¸Ğ½Ğ¸ÑÑ‚Ñ€Ğ°Ñ‚Ğ¾Ñ€Ğ¾Ğ¼\.\n"
        + "Ğ’Ğ·Ğ°Ğ¸Ğ¼Ğ¾Ğ´ĞµÑÑ‚Ğ²Ğ¸Ğµ Ñ Ñ‚ÑƒÑ€Ğ½Ğ¸Ñ€Ğ¾Ğ¼ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ğ¾ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ² ÑĞ¿ĞµÑ†Ğ¸Ğ°Ğ»ÑŒĞ½Ğ¾ Ğ²Ñ‹Ğ´ĞµĞ»ĞµĞ½Ğ½Ñ‹Ñ… Ñ‡Ğ°Ñ‚Ğ°Ñ…\.\n"
        + "Ğ”Ğ»Ñ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ° Ğº Ğ°Ğ´Ğ¼Ğ¸Ğ½Ğ¸ÑÑ‚Ñ€Ğ°Ñ‚Ğ¸Ğ²Ğ½Ğ¾Ğ¹ Ñ‡Ğ°ÑÑ‚Ğ¸ Ğ¾Ğ±Ñ€Ğ°Ñ‚Ğ¸Ñ‚ĞµÑÑŒ Ğº Ğ¾Ğ´Ğ½Ğ¾Ğ¼Ñƒ Ğ¸Ğ· Ğ°Ğ´Ğ¼Ğ¸Ğ½Ğ¸ÑÑ‚Ñ€Ğ°Ñ‚Ğ¾Ñ€Ğ¾Ğ² Ñ Ğ²Ğ°ÑˆĞ¸Ğ¼ Ğ¸Ğ´ĞµĞ½Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ‚Ğ¾Ñ€Ğ¾Ğ¼\.\n"
        + f"Ğ’Ğ°Ñˆ ID\: {user_id}\n"
        + "Ğ¡Ğ¿Ğ¸ÑĞ¾Ğº Ğ°Ğ´Ğ¼Ğ¸Ğ½Ğ¸ÑÑ‚Ñ€Ğ°Ñ‚Ğ¾Ñ€Ğ¾Ğ²\: "
        + "\, ".join(admins_list)
    )


def get_right_suffix(value: int, word_without_suffix: str) -> str:
    if value % 10 == 1 and value % 100 != 11:
        return word_without_suffix
    elif 2 <= value % 10 <= 4 and not 12 <= value % 100 <= 14:
        return word_without_suffix + "Ğ°"
    else:
        return word_without_suffix + "Ğ¾Ğ²"


def get_tournament_welcome_message(
    settings: TournamentSettings, tournament_url: str
) -> str:
    registration_hours = settings.registration_duration_hours.value
    tour_hours = settings.round_duration_hours.value
    tours = settings.rounds_number.value
    return dedent(
        f"""
        *Ğ—Ğ´Ñ€Ğ°Ğ²ÑÑ‚Ğ²ÑƒĞ¹Ñ‚Ğµ\! Ğ—Ğ´Ñ€Ğ°Ğ²ÑÑ‚Ğ²ÑƒĞ¹Ñ‚Ğµ\! Ğ—Ğ´Ñ€Ğ°Ğ²ÑÑ‚Ğ²ÑƒĞ¹Ñ‚Ğµ\!*
        ĞŸÑ€Ğ¸Ğ²ĞµÑ‚ÑÑ‚Ğ²ÑƒÑ, Ñ‚Ñ€Ğ¸Ğ±ÑƒÑ‚Ñ‹!

        Ğ”Ğ¾Ğ±Ñ€Ğ¾ Ğ¿Ğ¾Ğ¶Ğ°Ğ»Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ½Ğ° Ğ½Ğ¾Ğ²Ñ‹Ğ¹ Ñ‚ÑƒÑ€Ğ½Ğ¸Ñ€, Ğ³Ğ´Ğµ Ğ²Ñ‹ ÑĞ¼Ğ¾Ğ¶ĞµÑ‚Ğµ Ğ¿Ğ¾ĞºĞ°Ğ·Ğ°Ñ‚ÑŒ ÑĞ²Ğ¾Ğ¸ Ğ½Ğ°Ğ²Ñ‹ĞºĞ¸ Ğ¸ ÑÑ‚Ñ€Ğ°Ñ‚ĞµĞ³Ğ¸Ñ Ğ² Ğ±Ğ¸Ñ‚Ğ²Ğ°Ñ….
        Ğ¡Ğ¾Ñ€ĞµĞ²Ğ½Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ¿Ñ€Ğ¾Ğ²Ğ¾Ğ´Ğ¸Ñ‚ÑÑ Ğ¿Ğ¾ ÑĞ¸ÑÑ‚ĞµĞ¼Ğµ ĞœĞ°Ğº-ĞœĞ°Ğ³Ğ¾Ğ½Ğ° Ğ² {tours} {get_right_suffix(tours, "Ñ‚ÑƒÑ€")}
        ĞŸĞ¾ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ğ°Ğ¼ Ñ‚ÑƒÑ€Ğ½Ğ¸Ñ€Ğ° Ñ€ĞµĞ¹Ñ‚Ğ¸Ğ½Ğ³ Ğ²ÑĞµÑ… Ğ¸Ğ³Ñ€Ğ¾ĞºĞ¾Ğ² Ğ±ÑƒĞ´ĞµÑ‚ Ğ¿ĞµÑ€ĞµÑÑ‡Ğ¸Ñ‚Ğ°Ğ½ Ğ¿Ğ¾ Ñ„Ğ¾Ñ€Ğ¼ÑƒĞ»Ğµ Ğ­Ğ»Ğ¾ Ñ ÑƒÑ‡ĞµÑ‚Ğ¾Ğ¼ Ğ´Ğ¸Ğ½Ğ°Ğ¼Ğ¸Ñ‡ĞµÑĞºĞ¾Ğ³Ğ¾ Ğ¾Ñ‚ĞºĞ»Ğ¾Ğ½ĞµĞ½Ğ¸Ñ.
        Ğ’Ñ€ĞµĞ¼Ñ Ñ€ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ°Ñ†Ğ¸Ğ¸ Ğ¾Ğ³Ñ€Ğ°Ğ½Ğ¸Ñ‡ĞµĞ½Ğ¾ â€“ Ñƒ Ğ²Ğ°Ñ ĞµÑÑ‚ÑŒ Ğ²ÑĞµĞ³Ğ¾ {registration_hours} {get_right_suffix(registration_hours, "Ñ‡Ğ°Ñ")}, Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ Ğ·Ğ°ÑĞ²Ğ¸Ñ‚ÑŒ Ğ¾ ÑĞ²Ğ¾ĞµĞ¼ ÑƒÑ‡Ğ°ÑÑ‚Ğ¸Ğ¸. â³

        ĞšĞ°Ğ¶Ğ´Ñ‹Ğ¹ Ñ‚ÑƒÑ€ Ğ±ÑƒĞ´ĞµÑ‚ Ğ´Ğ»Ğ¸Ñ‚ÑŒÑÑ {tour_hours} {get_right_suffix(tour_hours, "Ñ‡Ğ°Ñ")}.
        Ğ’Ğ°Ğ¼ Ğ¿Ñ€ĞµĞ´ÑÑ‚Ğ¾Ğ¸Ñ‚ ÑĞ°Ğ¼Ğ¾ÑÑ‚Ğ¾ÑÑ‚ĞµĞ»ÑŒĞ½Ğ¾ Ğ´Ğ¾Ğ³Ğ¾Ğ²Ğ°Ñ€Ğ¸Ğ²Ğ°Ñ‚ÑŒÑÑ Ğ¾ Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ¸ Ğ±Ğ¸Ñ‚Ğ²Ñ‹ Ğ¸ ÑĞ¾Ğ·Ğ´Ğ°Ğ²Ğ°Ñ‚ÑŒ ĞºĞ°Ñ€Ñ‚Ñƒ Ğ² ÑĞ¾Ğ¾Ñ‚Ğ²ĞµÑ‚ÑÑ‚Ğ²Ğ¸Ğ¸ Ñ Ñ‚ÑƒÑ€Ğ½Ğ¸Ñ€Ğ½Ğ¾Ğ¹ Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†ĞµĞ¹, ĞºĞ¾Ñ‚Ğ¾Ñ€ÑƒÑ Ñ Ğ±ÑƒĞ´Ñƒ Ğ¿ÑƒĞ±Ğ»Ğ¸ĞºĞ¾Ğ²Ğ°Ñ‚ÑŒ Ğ² ÑÑ‚Ğ¾Ğ¼ Ñ‡Ğ°Ñ‚Ğµ.

        ğŸ“¥ Ğ—Ğ°Ñ€ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒÑÑ Ğ½Ğ° Ñ‚ÑƒÑ€Ğ½Ğ¸Ñ€ Ğ¼Ğ¾Ğ¶Ğ½Ğ¾, Ğ½Ğ°Ğ¶Ğ°Ğ² Ğ½Ğ° ĞºĞ½Ğ¾Ğ¿ĞºÑƒ Ğ¿Ğ¾Ğ´ ÑÑ‚Ğ¸Ğ¼ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸ĞµĞ¼.

        ĞŸĞ¾ÑĞ»Ğµ Ñ€ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ°Ñ†Ğ¸Ğ¸ Ñ ÑĞ²ÑĞ¶ÑƒÑÑŒ Ñ Ğ²Ğ°Ğ¼Ğ¸ Ğ»Ğ¸Ñ‡Ğ½Ğ¾, Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ ÑƒÑ‚Ğ¾Ñ‡Ğ½Ğ¸Ñ‚ÑŒ Ğ²Ğ°Ñˆ Ğ½Ğ¸Ğº Ğ² Ğ¸Ğ³Ñ€Ğµ, ĞµÑĞ»Ğ¸ Ğ¾Ğ½ Ğ¼Ğ½Ğµ ĞµÑ‰Ğµ Ğ½Ğµ Ğ¸Ğ·Ğ²ĞµÑÑ‚ĞµĞ½.

        Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ñ‹ Ğ±Ğ¸Ñ‚Ğ² Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ Ğ±ÑƒĞ´ĞµÑ‚ Ğ·Ğ°Ñ€ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ¿Ğ¾Ğ´ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸ĞµĞ¼ ÑĞ¾Ğ¾Ñ‚Ğ²ĞµÑ‚ÑÑ‚Ğ²ÑƒÑÑ‰ĞµĞ³Ğ¾ Ñ‚ÑƒÑ€Ğ°.
        Ğ’ÑÑ Ğ¸Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ñ Ğ¾ Ñ‚ÑƒÑ€Ğ½Ğ¸Ñ€Ğµ, Ğ²ĞºĞ»ÑÑ‡Ğ°Ñ ÑĞ¿Ğ¸ÑĞ¾Ğº Ğ·Ğ°Ñ€ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ²ÑˆĞ¸Ñ…ÑÑ ÑƒÑ‡Ğ°ÑÑ‚Ğ½Ğ¸ĞºĞ¾Ğ², Ñ‚ÑƒÑ€Ğ½Ğ¸Ñ€Ğ½Ñ‹Ğµ Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ñ‹ Ğ¸ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ñ‹, Ğ±ÑƒĞ´ĞµÑ‚ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ğ° Ğ¿Ğ¾ ÑÑ‚Ğ¾Ğ¹ ÑÑÑ‹Ğ»ĞºĞµ: {tournament_url}

        Ğ•ÑĞ»Ğ¸ Ğ² Ğ¿Ñ€Ğ¾Ñ†ĞµÑÑĞµ Ğ¿Ğ¾Ğ´Ğ³Ğ¾Ñ‚Ğ¾Ğ²ĞºĞ¸ Ğº Ğ±Ğ¸Ñ‚Ğ²Ğµ Ğ¸Ğ»Ğ¸ Ğ²Ğ¾ Ğ²Ñ€ĞµĞ¼Ñ Ñ‚ÑƒÑ€Ğ½Ğ¸Ñ€Ğ° Ñƒ Ğ²Ğ°Ñ Ğ²Ğ¾Ğ·Ğ½Ğ¸ĞºĞ½ÑƒÑ‚ Ğ¿Ñ€Ğ¾Ğ±Ğ»ĞµĞ¼Ñ‹ Ğ¸Ğ»Ğ¸ Ğ²Ğ¾Ğ¿Ñ€Ğ¾ÑÑ‹, Ğ¿Ñ€Ğ¾ÑˆÑƒ Ğ²Ğ°Ñ ÑĞ¾Ğ¾Ğ±Ñ‰Ğ¸Ñ‚ÑŒ Ğ¾Ğ± ÑÑ‚Ğ¾Ğ¼ Ğ°Ğ´Ğ¼Ğ¸Ğ½Ğ¸ÑÑ‚Ñ€Ğ°Ñ‚Ğ¾Ñ€Ğ°Ğ¼.
        ĞŸĞ¾Ğ¼Ğ½Ğ¸Ñ‚Ğµ, Ñ‡Ñ‚Ğ¾ ÑÑ‚Ğ¾ Ğ¿ĞµÑ€Ğ²Ñ‹Ğµ Ñ‚ĞµÑÑ‚Ğ¾Ğ²Ñ‹Ğµ Ğ·Ğ°Ğ¿ÑƒÑĞºĞ¸, Ğ¿Ğ¾ÑÑ‚Ğ¾Ğ¼Ñƒ Ğ²Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ñ‹ Ğ½ĞµĞºĞ¾Ñ‚Ğ¾Ñ€Ñ‹Ğµ Ñ‚Ñ€ÑƒĞ´Ğ½Ğ¾ÑÑ‚Ğ¸.

        Ğ¡Ñ‡Ğ°ÑÑ‚Ğ»Ğ¸Ğ²Ñ‹Ñ… Ğ²Ğ°Ğ¼ Ğ³Ğ¾Ğ»Ğ¾Ğ´Ğ½Ñ‹Ñ… Ğ¸Ğ³Ñ€\.
        Ğ˜ Ğ¿ÑƒÑÑ‚ÑŒ ÑƒĞ´Ğ°Ñ‡Ğ° Ğ²ÑĞµĞ³Ğ´Ğ° Ğ±ÑƒĞ´ĞµÑ‚ Ñ Ğ²Ğ°Ğ¼Ğ¸\.
        """
    )


def get_next_tour_message(
    settings: TournamentSettings, pairs: List[Match], tournament_url: str
) -> str:
    tour_hours = settings.round_duration_hours.value
    pairs_str = ""
    for match in pairs:
        first = f"[{match.first.value}](tg://user?id={match.first_id})"
        second = f"[{match.second.value}](tg://user?id={match.second_id})"
        pairs_str += f"{first} vs {second}"
    return dedent(
        f"""
        Ğ’Ğ½Ğ¸Ğ¼Ğ°Ğ½Ğ¸Ğµ, Ñ‚Ñ€Ğ¸Ğ±ÑƒÑ‚Ñ‹!

        ĞĞ°ÑÑ‚Ğ°Ğ»Ğ¾ Ğ²Ñ€ĞµĞ¼Ñ Ğ´Ğ»Ñ ÑĞ»ĞµĞ´ÑƒÑÑ‰ĞµĞ³Ğ¾ Ñ‚ÑƒÑ€Ğ° Ğ½Ğ°ÑˆĞµĞ³Ğ¾ Ğ·Ğ°Ñ…Ğ²Ğ°Ñ‚Ñ‹Ğ²Ğ°ÑÑ‰ĞµĞ³Ğ¾ Ñ‚ÑƒÑ€Ğ½Ğ¸Ñ€Ğ°.
        ĞŸÑ€Ğ¸ÑˆĞ»Ğ¾ Ğ²Ñ€ĞµĞ¼Ñ Ğ´Ğ¾ĞºĞ°Ğ·Ğ°Ñ‚ÑŒ ÑĞ²Ğ¾Ñ ÑĞ¸Ğ»Ñƒ Ğ¸ Ğ¼Ğ°ÑÑ‚ĞµÑ€ÑÑ‚Ğ²Ğ¾ Ğ½Ğ° Ğ°Ñ€ĞµĞ½Ğµ!

        Ğ£ Ğ²Ğ°Ñ ĞµÑÑ‚ÑŒ {tour_hours} {get_right_suffix(tour_hours, "Ñ‡Ğ°Ñ")} Ğ½Ğ° Ğ¿Ñ€Ğ¾Ğ²ĞµĞ´ĞµĞ½Ğ¸Ğµ Ğ±Ğ¸Ñ‚Ğ²Ñ‹.
        Ğ”Ğ¾Ğ³Ğ¾Ğ²Ğ¾Ñ€Ğ¸Ñ‚ĞµÑÑŒ Ñ ÑĞ¾Ğ¿ĞµÑ€Ğ½Ğ¸ĞºĞ¾Ğ¼ Ğ¾ Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ¸ Ğ²ÑÑ‚Ñ€ĞµÑ‡Ğ¸ Ğ¸ ÑĞ¾Ğ·Ğ´Ğ°Ğ¹Ñ‚Ğµ ĞºĞ°Ñ€Ñ‚Ñƒ Ğ² ÑĞ¾Ğ¾Ñ‚Ğ²ĞµÑ‚ÑÑ‚Ğ²Ğ¸Ğ¸ ÑĞ¾ ÑĞ»ĞµĞ´ÑƒÑÑ‰ĞµĞ¹ Ñ‚ÑƒÑ€Ğ½Ğ¸Ñ€Ğ½Ğ¾Ğ¹ Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†ĞµĞ¹:
        {pairs_str}
        Ğ’ÑÑ Ğ¸Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ñ Ğ¾ Ñ‚ÑƒÑ€Ğ½Ğ¸Ñ€Ğµ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ğ° Ğ¿Ğ¾ ÑÑ‚Ğ¾Ğ¹ ÑÑÑ‹Ğ»ĞºĞµ: {tournament_url}

        ĞŸĞ¾ÑĞ»Ğµ Ğ·Ğ°Ğ²ĞµÑ€ÑˆĞµĞ½Ğ¸Ñ Ğ±Ğ¸Ñ‚Ğ²Ñ‹ Ğ·Ğ°Ñ€ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ¸Ñ€ÑƒĞ¹Ñ‚Ğµ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚, Ğ½Ğ°Ğ¶Ğ°Ğ² Ğ½Ğ° ĞºĞ½Ğ¾Ğ¿ĞºÑƒ Ğ¿Ğ¾Ğ´ ÑÑ‚Ğ¸Ğ¼ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸ĞµĞ¼.
        ĞŸÑƒÑÑ‚ÑŒ ĞºĞ°Ğ¶Ğ´Ñ‹Ğ¹ Ñ…Ğ¾Ğ´ Ğ¿Ñ€Ğ¸Ğ±Ğ»Ğ¸Ğ¶Ğ°ĞµÑ‚ Ğ²Ğ°Ñ Ğº Ğ¿Ğ¾Ğ±ĞµĞ´Ğµ Ğ¸ ÑĞ»Ğ°Ğ²Ğµ!

        ĞŸĞ¾Ğ¼Ğ½Ğ¸Ñ‚Ğµ, Ñ‡Ñ‚Ğ¾ Ğ²ÑĞµ Ğ²Ğ¾Ğ·Ğ½Ğ¸ĞºĞ°ÑÑ‰Ğ¸Ğµ Ğ²Ğ¾Ğ¿Ñ€Ğ¾ÑÑ‹ Ğ¸ Ğ¿Ñ€Ğ¾Ğ±Ğ»ĞµĞ¼Ñ‹ Ğ´Ğ¾Ğ»Ğ¶Ğ½Ñ‹ Ğ±Ñ‹Ñ‚ÑŒ Ğ½ĞµĞ·Ğ°Ğ¼ĞµĞ´Ğ»Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ Ğ´Ğ¾Ğ²ĞµĞ´ĞµĞ½Ñ‹ Ğ´Ğ¾ ÑĞ²ĞµĞ´ĞµĞ½Ğ¸Ñ Ğ°Ğ´Ğ¼Ğ¸Ğ½Ğ¸ÑÑ‚Ñ€Ğ°Ñ‚Ğ¾Ñ€Ğ¾Ğ².
        Ğ­Ñ‚Ğ¾Ñ‚ Ñ‚ÑƒÑ€Ğ½Ğ¸Ñ€ â€“ Ğ¸ÑĞ¿Ñ‹Ñ‚Ğ°Ğ½Ğ¸Ğµ Ğ´Ğ»Ñ Ğ²ÑĞµÑ… Ğ½Ğ°Ñ, Ğ½Ğ¾ Ğ¼Ñ‹ ÑƒĞ²ĞµÑ€ĞµĞ½Ñ‹, Ñ‡Ñ‚Ğ¾ Ğ²Ñ‹ ÑĞ¿Ñ€Ğ°Ğ²Ğ¸Ñ‚ĞµÑÑŒ.

        ĞŸÑƒÑÑ‚ÑŒ ÑƒĞ´Ğ°Ñ‡Ğ° Ğ±ÑƒĞ´ĞµÑ‚ Ğ½Ğ° Ğ²Ğ°ÑˆĞµĞ¹ ÑÑ‚Ğ¾Ñ€Ğ¾Ğ½Ğµ! Ğ”Ğ° Ğ½Ğ°Ñ‡Ğ½ĞµÑ‚ÑÑ Ğ±Ğ¸Ñ‚Ğ²Ğ°! ğŸ®ğŸ†
        """
    )


def get_tournament_end_message(winners: List[str], tournament_url: str) -> str:
    places = ["ğŸ¥‡ ĞŸĞµÑ€Ğ²Ğ¾Ğµ", "ğŸ¥ˆ Ğ’Ñ‚Ğ¾Ñ€Ğ¾Ğµ", "ğŸ¥‰ Ğ¢Ñ€ĞµÑ‚ÑŒĞµ"]
    winners_str = ""
    for i, winner in enumerate(winners):
        if i > len(places):
            break
        winners_str += places[i] + " Ğ¼ĞµÑÑ‚Ğ¾: " + winner + "\n"
    return dedent(
        f"""
        Ğ¢Ñ€Ğ¸Ğ±ÑƒÑ‚Ñ‹!

        ĞĞ°Ñˆ Ñ‚ÑƒÑ€Ğ½Ğ¸Ñ€ Ğ¿Ğ¾Ğ´Ğ¾ÑˆĞµĞ» Ğº ĞºĞ¾Ğ½Ñ†Ñƒ.
        Ğ’Ñ‹ Ğ²ÑĞµ Ğ¿Ñ€Ğ¾ÑĞ²Ğ¸Ğ»Ğ¸ Ğ½ĞµĞ²ĞµÑ€Ğ¾ÑÑ‚Ğ½ÑƒÑ ÑĞ¸Ğ»Ñƒ, ÑÑ‚Ñ€Ğ°Ñ‚ĞµĞ³Ğ¸Ñ Ğ¸ Ğ²Ğ¾Ğ»Ñ Ğº Ğ¿Ğ¾Ğ±ĞµĞ´Ğµ.
        ĞŸÑ€Ğ¸ÑˆĞ»Ğ¾ Ğ²Ñ€ĞµĞ¼Ñ Ğ¾Ğ±ÑŠÑĞ²Ğ¸Ñ‚ÑŒ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ñ‹ Ğ¸ Ñ‡ĞµÑÑ‚Ğ²Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ½Ğ°ÑˆĞ¸Ñ… Ñ‡ĞµĞ¼Ğ¿Ğ¸Ğ¾Ğ½Ğ¾Ğ².

        {winners_str}

        Ğ’Ñ‹ Ğ¿Ğ¾ĞºĞ°Ğ·Ğ°Ğ»Ğ¸ Ğ²Ñ‹ÑÑˆĞ¸Ğ¹ ĞºĞ»Ğ°ÑÑ Ğ² ÑÑ‚Ğ¾Ğ¼ Ñ‚ÑƒÑ€Ğ½Ğ¸Ñ€Ğµ, Ğ¸ Ğ²Ğ°ÑˆĞ¸ Ğ´Ğ¾ÑÑ‚Ğ¸Ğ¶ĞµĞ½Ğ¸Ñ Ğ½Ğ°Ğ²ÑĞµĞ³Ğ´Ğ° Ğ¾ÑÑ‚Ğ°Ğ½ÑƒÑ‚ÑÑ Ğ² Ğ¸ÑÑ‚Ğ¾Ñ€Ğ¸Ğ¸ Ğ½Ğ°ÑˆĞ¸Ñ… Ğ±Ğ¸Ñ‚Ğ².
        Ğ’ÑÑ Ğ¸Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ñ Ğ¾ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ğ°Ñ… Ñ‚ÑƒÑ€Ğ½Ğ¸Ñ€Ğ° Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ğ° Ğ¿Ğ¾ ÑÑ‚Ğ¾Ğ¹ ÑÑÑ‹Ğ»ĞºĞµ: {tournament_url}

        ĞœÑ‹ Ğ±Ğ»Ğ°Ğ³Ğ¾Ğ´Ğ°Ñ€Ğ¸Ğ¼ Ğ²ÑĞµÑ… ÑƒÑ‡Ğ°ÑÑ‚Ğ½Ğ¸ĞºĞ¾Ğ² Ğ·Ğ° Ğ¸Ñ… ÑƒÑĞµÑ€Ğ´Ğ¸Ğµ Ğ¸ Ğ±Ğ¾ĞµĞ²Ğ¾Ğ¹ Ğ´ÑƒÑ….
        Ğ•ÑĞ»Ğ¸ Ñƒ Ğ²Ğ°Ñ ĞµÑÑ‚ÑŒ ĞºĞ°ĞºĞ¸Ğµ-Ğ»Ğ¸Ğ±Ğ¾ Ğ²Ğ¾Ğ¿Ñ€Ğ¾ÑÑ‹ Ğ¸Ğ»Ğ¸ Ğ¿Ñ€ĞµĞ´Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ñ, Ğ½Ğµ ÑÑ‚ĞµÑĞ½ÑĞ¹Ñ‚ĞµÑÑŒ Ğ¾Ğ±Ñ€Ğ°Ñ‰Ğ°Ñ‚ÑŒÑÑ Ğº Ğ°Ğ´Ğ¼Ğ¸Ğ½Ğ¸ÑÑ‚Ñ€Ğ°Ñ‚Ğ¾Ñ€Ğ°Ğ¼.

        ĞŸÑƒÑÑ‚ÑŒ ÑƒĞ´Ğ°Ñ‡Ğ° Ğ²ÑĞµĞ³Ğ´Ğ° Ğ±ÑƒĞ´ĞµÑ‚ Ğ½Ğ° Ğ²Ğ°ÑˆĞµĞ¹ ÑÑ‚Ğ¾Ñ€Ğ¾Ğ½Ğµ, Ğ¸ Ğ´Ğ¾ Ğ²ÑÑ‚Ñ€ĞµÑ‡Ğ¸ Ğ½Ğ° ÑĞ»ĞµĞ´ÑƒÑÑ‰ĞµĞ¼ Ñ‚ÑƒÑ€Ğ½Ğ¸Ñ€Ğµ! ğŸ®ğŸ†

        Ğ¡ ÑƒĞ²Ğ°Ğ¶ĞµĞ½Ğ¸ĞµĞ¼,
        ĞĞ´Ğ¼Ğ¸Ğ½Ğ¸ÑÑ‚Ñ€Ğ°Ñ†Ğ¸Ñ Ñ‚ÑƒÑ€Ğ½Ğ¸Ñ€Ğ°
        """
    )


def get_ids(message: Union[Message, CallbackQuery]) -> Tuple[int, int, int]:
    user_id = message.from_user.id
    if isinstance(message, CallbackQuery):
        message = message.message
    chat_id = message.chat.id
    message_id = message.id
    return user_id, chat_id, message_id


class Button:
    def __init__(self, descr: str, data: str = ""):
        self.data = data
        self.descr = descr

    def inline(self):
        return InlineKeyboardButton(text=self.descr, callback_data=self.data)

    def reply(self):
        return KeyboardButton(text=self.descr)


def empty_filter(_):
    return True
